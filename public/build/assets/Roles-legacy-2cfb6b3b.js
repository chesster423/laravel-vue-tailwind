System.register(["./vendor-legacy-5a00c1f1.js","./default.css_vue_type_style_index_0_src_true_lang-legacy-c634714b.js","./app-legacy-f97a04bf.js","./multiselect-legacy-22863c5d.js","./Errors-legacy-3c12a83a.js","./__commonjsHelpers__-legacy-366a78b9.js"],(function(e,t){"use strict";var a,r,s,o,l,n,i,d,c,p,g,m,u,h,b,f,x,y,w,k,v,R,C,D,T,_,U,M,P,E,j,F,B,A,I,S,$;return{setters:[e=>{a=e.aA,r=e.aB,s=e.aC,o=e.aD,l=e.b,n=e.h,i=e.r,d=e.o,c=e.c,p=e.e,g=e.B,m=e.D,u=e.d,h=e.w,b=e.z,f=e.a,x=e.J,y=e.K,w=e.v,k=e.Q,v=e.E,R=e.C,C=e.ad,D=e.n,T=e.G,_=e.H,U=e.I,M=e.az,P=e.y},e=>{E=e.P,j=e.A,F=e.c,B=e.a},e=>{A=e.C,I=e._},e=>{S=e.s},e=>{$=e.E},null],execute:function(){var t=document.createElement("style");t.textContent="[data-v-3283c55c] .multiselect-option{background:transparent;color:#777}[data-v-3283c55c] .multiselect-option.is-pointed{background:#10b981;color:#fff}\n",document.head.appendChild(t);const N={name:"RolesTableRow",components:{LockClosedIcon:a,LockOpenIcon:r,CircleSvg:A,PencilSquareIcon:s,TrashIcon:o},props:{role:{type:Object,required:!0},dataReady:{type:Boolean,default:!1},lockJiggled:{type:Boolean,default:!1}},setup:()=>({}),data:()=>({locked:!0}),computed:{},watch:{lockJiggled(e){this.locked=!0}},created(){},mounted(){},beforeUnmount(){},updated(){},methods:{...l({popToast:"toast/popToast"}),parseDisplayDate:e=>n(e).format("MMM Do YYYY, h:mma"),triggerEditRole(){this.$emit("editRole",this.role)},triggerDeleteRole(){const e=this,t=`<strong>Delete ${this.role.name}?</strong>`;this.role.name,e.$swal.fire({title:t,icon:"warning",html:"Are you sure you want to <strong>Delete",showCancelButton:!1,showDenyButton:!0,confirmButtonColor:"#FF0000",denyButtonColor:"#777777",confirmButtonText:"Delete",denyButtonText:"Cancel"}).then((t=>{t.isConfirmed?this.$emit("deleteRole",this.role):t.isDenied&&e.popToast({message:"Cancelled",timer:2e3,icon:"error"})}))}}},V={class:"bg-gray-100 text-gray-900 dark:bg-slate-700 dark:text-gray-100"},Y={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},L={class:"flex items-center"},J={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},z={class:"flex items-center whitespace-nowrap"},G={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},K={class:"flex items-center"},O={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},q={class:"flex items-center text-xs"},H={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},Q={class:"flex items-center"},W={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},X={class:"flex items-center"},Z={key:0,class:"whitespace-nowrap text-xs"},ee={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},te={class:"flex items-center"},ae={key:0,class:"whitespace-nowrap text-xs"},re={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},se={key:0,class:"flex items-center"},oe={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},le={key:0,class:"flex items-center"},ne={class:"border-b border-gray-300 px-5 py-5 text-sm dark:border-gray-500"},ie={class:"flex items-center whitespace-nowrap"},de={class:"sr-only"},ce=p("span",{class:"sr-only"},"Edit Role",-1),pe=p("span",{class:"sr-only"},"Delete Role",-1),ge={name:"RolesTable",components:{Pagination:E,RolesTableRow:I(N,[["render",function(e,t,a,r,s,o){const l=i("LockClosedIcon"),n=i("LockOpenIcon"),f=i("CircleSvg"),x=i("AppButton"),y=i("PencilSquareIcon"),w=i("TrashIcon");return d(),c("tr",V,[p("td",Y,[p("div",L,g(a.role.id),1)]),p("td",J,[p("div",z,g(a.role.name),1)]),p("td",G,[p("div",K,g(a.role.slug),1)]),p("td",O,[p("div",q,g(a.role.description),1)]),p("td",H,[p("div",Q,g(a.role.level),1)]),p("td",W,[p("div",X,[a.role.created_at?(d(),c("span",Z,g(o.parseDisplayDate(a.role.created_at)),1)):m("",!0)])]),p("td",ee,[p("div",te,[a.role.updated_at?(d(),c("span",ae,g(o.parseDisplayDate(a.role.updated_at)),1)):m("",!0)])]),p("td",re,[a.role&&a.role.users&&a.role.users.length>=0?(d(),c("div",se,g(a.role.users.length),1)):m("",!0)]),p("td",oe,[a.role&&a.role.permissions&&a.role.permissions.length>=0?(d(),c("div",le,g(a.role.permissions.length),1)):m("",!0)]),p("td",ne,[p("div",ie,[u(x,{loading:!a.dataReady,class:"mr-2 inline-block rounded px-1 py-1 text-sm font-medium leading-snug leading-snug text-gray-700 shadow-md transition duration-150 ease-in-out hover:shadow-lg focus:shadow-lg focus:outline-none focus:ring-0 active:shadow-lg dark:text-white","btn-class":(s.locked,"bg-transparent focus:bg-transparent active:bg-transparent dark:focus:bg-transparent dark:active:bg-transparent dark:hover:bg-transparent"),"btn-hover-class":(s.locked,"hover:bg-transparent focus:bg-transparent active:bg-transparent dark:focus:bg-transparent dark:active:bg-transparent dark:hover:bg-transparent"),"btn-class-dark":(s.locked,"bg-transparent focus:bg-transparent active:bg-transparent dark:focus:bg-transparent dark:active:bg-transparent dark:hover:bg-transparent"),"btn-hover-class-dark":(s.locked,"hover:bg-transparent focus:bg-transparent active:bg-transparent dark:focus:bg-transparent dark:active:bg-transparent dark:hover:bg-transparent"),onClick:t[0]||(t[0]=e=>s.locked=!s.locked)},{text:h((()=>[s.locked&&a.dataReady?(d(),b(l,{key:0,class:"ml-2 mr-2 mt-0 h-4 w-4"})):m("",!0),!s.locked&&a.dataReady?(d(),b(n,{key:1,class:"ml-2 mr-2 mt-0 h-4 w-4"})):m("",!0),a.dataReady?m("",!0):(d(),b(f,{key:2,class:"mr-2 h-3 w-3"})),p("span",de,g(s.locked?"Unlock":"Lock")+" User Settings",1)])),_:1},8,["loading","btn-class","btn-hover-class","btn-class-dark","btn-hover-class-dark"]),u(x,{warning:"",disabled:s.locked,loading:!a.dataReady,class:"mr-2 px-1 py-1 text-sm",onClick:o.triggerEditRole},{text:h((()=>[a.dataReady?(d(),b(y,{key:0,class:"ml-2 mr-2 mt-0 h-4 w-4"})):m("",!0),a.dataReady?m("",!0):(d(),b(f,{key:1,class:"mr-2 h-3 w-3"})),ce])),_:1},8,["disabled","loading","onClick"]),u(x,{danger:"",disabled:s.locked||a.role&&a.role.users&&a.role.users.length>0,loading:!a.dataReady,class:"mr-2 px-1 py-1 text-sm",onClick:o.triggerDeleteRole},{text:h((()=>[a.dataReady?(d(),b(w,{key:0,class:"ml-2 mr-2 mt-0 h-4 w-4"})):m("",!0),a.dataReady?m("",!0):(d(),b(f,{key:1,class:"mr-2 h-3 w-3"})),pe])),_:1},8,["disabled","loading","onClick"])])])])}]])},props:{dataReady:{type:Boolean,default:!1},lockJiggled:{type:Boolean,default:!1},rolesData:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>({})}},setup:()=>({}),data:()=>({offset:4}),computed:{...f({authenticated:"auth/authenticated",user:"auth/user",roles:"auth/roles"})},watch:{},created(){},mounted(){},beforeUnmount(){},updated(){},methods:{...l({popToast:"toast/popToast"}),getRoles(e){this.$emit("getRoles",e)},deleteRole(e){this.$emit("deleteRole",e)},editRole(e){this.$emit("editRole",e)}}},me={class:"overflow-x-scroll rounded-lg shadow",style:{width:"100%"}},ue={class:"min-w-full leading-normal","aria-describedby":"Users Table"},he=p("thead",null,[p("tr",{class:"border-b-2 border-gray-300 bg-gray-200 text-gray-600 dark:border-gray-500 dark:bg-slate-900 dark:text-gray-200"},[p("th",{class:"px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Id "),p("th",{class:"px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Name "),p("th",{class:"px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Slug "),p("th",{class:"whitespace-nowrap px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Description "),p("th",{class:"px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Level "),p("th",{class:"whitespace-nowrap px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Updated At "),p("th",{class:"whitespace-nowrap px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Updated At "),p("th",{class:"whitespace-nowrap px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Users "),p("th",{class:"whitespace-nowrap px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"}," Permissions "),p("th",{class:"px-5 py-3 text-left text-xs font-semibold uppercase tracking-wider"})])],-1),be={key:0},fe={key:1},xe=[p("tr",{class:"bg-gray-100 text-gray-900 dark:bg-slate-700 dark:text-gray-100"},[p("td",{colspan:"10",class:"pb-10 pt-10 text-center"},[p("span",{class:"fa fa-circle-notch fa-spin fa-5x text-gray-400"})])],-1)],ye={class:"w-full text-center"},we={colspan:"10"},ke={key:0,class:"xs:flex-row xs:justify-between flex flex-col items-center px-3 py-3 dark:bg-slate-700"},ve=I(ge,[["render",function(e,t,a,r,s,o){const l=i("RolesTableRow"),n=i("Pagination");return d(),c("div",me,[p("table",ue,[he,a.dataReady?(d(),c("tbody",be,[(d(!0),c(x,null,y(a.rolesData,(e=>(d(),b(l,{key:e.id,role:e,"data-ready":a.dataReady,"lock-jiggled":a.lockJiggled,onEditRole:o.editRole,onDeleteRole:o.deleteRole},null,8,["role","data-ready","lock-jiggled","onEditRole","onDeleteRole"])))),128))])):m("",!0),a.dataReady?m("",!0):(d(),c("tbody",fe,xe)),p("tfoot",ye,[p("tr",null,[p("td",we,[a.dataReady&&a.rolesData&&a.rolesData.length>=1?(d(),c("div",ke,[u(n,{pagination:a.pagination,offset:4,onPaginate:o.getRoles},null,8,["pagination","onPaginate"])])):m("",!0)])])])])])}]]),Re={name:"UserFormModal",components:{AppModal:j,UserCircleIcon:w,Multiselect:S,Errors:$},props:{showingForm:{type:Boolean,default:!1},newRole:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},role:{type:Object,default:null},useInlineMessage:{type:Boolean,default:!1},availablePermissions:{type:Array,default:null}},setup:()=>({}),data:()=>({roleName:"",form:{name:null,slug:null,description:null,level:0,permissions:[]},submitting:!1,errors:null,changed:!1,ready:!1}),computed:{},watch:{form:{handler(e,t){this.ready&&(this.changed=!0)},deep:!0,immediate:!1}},created(){},mounted(){const e=this;e.role?(e.form=F(e.role),e.role.name&&(e.roleName=e.role.name),e.form.permissions=e.form.permissions.map((e=>e.id)),setTimeout((()=>{e.ready=!0}),100)):e.ready=!0},beforeUnmount(){},updated(){},methods:{...l({popToast:"toast/popToast"}),parseDisplayDate:e=>e&&1!=e?n(e).format("MMM Do YYYY, h:mma"):n(new Date).format("MMM Do YYYY, h:mma"),async submit(){this.error=null,this.submitting=!0,this.newRole&&await this.createRole(),this.newRole||await this.updateRole(),this.submitting=!1},formValid(){return this.errors=null,!!this.form&&(this.form.name||(this.errors={},this.errors.name="Missing Role Name"),this.form.slug||(this.errors||(this.errors={}),this.errors.slug="Missing Role Slug"),!this.errors)},async createRole(){if(!this.formValid())return this.submitting=!1,void this.popToast({message:"Error Validating Role",timer:5e3,icon:"error"});await k.post("/api/roles/create-role",this.form).then((({data:e})=>{this.$emit("roleCreated",e.role),this.popToast({message:"Role Successfully Created!",timer:5e3,icon:"success"}),this.submitting=!1})).catch((({response:e})=>{if(422===e.status){const{errors:t}=e.data;this.errors=t}else this.popToast({message:"Error Creating Role",timer:5e3,icon:"error"});this.submitting=!1})),this.submitting=!1},async updateRole(){const e=this;if(!this.formValid())return this.submitting=!1,void this.popToast({message:"Error Validating Role",timer:5e3,icon:"error"});await k.patch(`/api/roles/update-role/${e.role.id}`,e.form).then((({data:t})=>{e.$emit("roleUpdated",t.role),e.popToast({message:`Role ${t.role.name} Successfully Updated!`,timer:5e3,icon:"success"}),e.submitting=!1})).catch((({response:t})=>{if(422===t.status){const{errors:a}=t.data;e.errors=a}else e.popToast({message:"Error Updating Role",timer:5e3,icon:"error"});e.submitting=!1})),e.submitting=!1},closeModal(){this.$emit("closeModal")}}},Ce=e=>(_("data-v-3283c55c"),e=e(),U(),e),De={class:"relative mb-3 flex w-full flex-wrap items-stretch"},Te={class:"flex-item relative mb-3 flex-auto"},_e=Ce((()=>p("label",{for:"name"}," Name ",-1))),Ue={class:"absolute absolute right-0 z-10 h-full w-8 items-center justify-center rounded bg-transparent py-3 pr-3 text-center text-base font-normal leading-snug text-slate-300"},Me={class:"relative mb-3 flex w-full flex-wrap items-stretch"},Pe={class:"flex-item relative mb-3 flex-auto"},Ee=Ce((()=>p("label",{for:"slug"}," Slug ",-1))),je={class:"absolute absolute right-0 z-10 h-full w-8 items-center justify-center rounded bg-transparent py-3 pr-3 text-center text-base font-normal leading-snug"},Fe={class:"relative mb-3 flex w-full flex-wrap items-stretch"},Be={class:"flex-item relative mb-3 flex-auto"},Ae=Ce((()=>p("label",{for:"description"}," Description ",-1))),Ie={class:"absolute absolute right-0 z-10 h-full w-8 items-center justify-center rounded bg-transparent py-3 pr-3 text-center text-base font-normal leading-snug"},Se={class:"relative mb-3 flex w-full flex-wrap items-stretch"},$e={class:"flex-item relative mb-3 flex-auto"},Ne=Ce((()=>p("label",{for:"level"}," Level ",-1))),Ve={class:"absolute absolute right-0 z-10 h-full w-8 items-center justify-center rounded bg-transparent py-3 pr-3 text-center text-base font-normal leading-snug"},Ye={class:"relative mb-3 flex w-full flex-wrap items-stretch"},Le={class:"flex-item relative mb-3 max-w-2xl flex-auto"},Je=Ce((()=>p("h6",null,"Role Permissions",-1))),ze={key:0,class:"relative mb-3 mt-5 flex w-full flex-wrap items-stretch"},Ge={class:"flex-item relative flex-auto text-xs"},Ke=Ce((()=>p("strong",{class:"text-red-400"},[p("span",{class:"fas fa-warning fa-fw mr-1"}),v("Warning")],-1))),Oe={class:"font-bold"},qe={class:"relative mb-3 mt-5 flex w-full flex-wrap items-stretch"},He={class:"flex-item relative flex-auto text-xs uppercase"},Qe={key:0,class:"float-left"},We={class:"text-xs font-bold"},Xe={class:"flex-item relative flex-auto text-xs uppercase"},Ze={key:0,class:"float-right"},et={class:"text-xs font-bold"},tt={style:{width:"100%"}},at={key:0,class:"fa fa-circle-notch fa-spin ml-3"},rt={name:"Roles",components:{ChevronRightIcon:M,RolesTable:ve,RoleFormModal:I(Re,[["render",function(e,t,a,r,s,o){const l=i("Errors"),n=i("Multiselect"),f=i("AppButton"),x=i("AppModal");return d(),b(x,{"show-modal":a.showingForm,onCloseModal:o.closeModal},{title:h((()=>[v(g(a.newRole?"Create Role":"Editing Role "+s.roleName),1)])),body:h((()=>[s.errors&&a.useInlineMessage?(d(),b(l,{key:0,content:s.errors,errors:s.errors,"container-class":"w-100 mb-5",type:"error",onClose:t[0]||(t[0]=e=>s.errors=null)},null,8,["content","errors"])):m("",!0),p("form",{onSubmit:t[6]||(t[6]=T((()=>{}),["prevent"]))},[p("div",De,[p("div",Te,[_e,R(p("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.form.name=e),type:"text",placeholder:"Name",name:"name",class:D(["relative w-full rounded border bg-white bg-white px-3 py-3 pr-10 text-sm shadow outline-none focus:outline-none",s.errors&&s.errors.name?"border-red-500 text-red-600 placeholder-red-500 dark:placeholder-red-600":"border-transparent text-slate-600 placeholder-slate-300 dark:placeholder-slate-400"])},null,2),[[C,s.form.name]]),p("span",Ue,[p("span",{class:D(["fas fa-lock",s.errors&&s.errors.name?"text-red-600":"text-slate-300"])},null,2)])])]),p("div",Me,[p("div",Pe,[Ee,R(p("input",{id:"slug","onUpdate:modelValue":t[2]||(t[2]=e=>s.form.slug=e),type:"text",placeholder:"Slug",name:"slug",class:D(["relative w-full rounded border bg-white bg-white px-3 py-3 pr-10 text-sm shadow outline-none focus:outline-none",s.errors&&s.errors.slug?"border-red-500 text-red-600 placeholder-red-500 dark:text-red-600 dark:placeholder-red-600":"border-transparent text-slate-600 placeholder-slate-300 dark:placeholder-slate-400"])},null,2),[[C,s.form.slug]]),p("span",je,[p("span",{class:D(["fas fa-code",s.errors&&s.errors.slug?"text-red-600":"text-slate-300"])},null,2)])])]),p("div",Fe,[p("div",Be,[Ae,R(p("textarea",{id:"description","onUpdate:modelValue":t[3]||(t[3]=e=>s.form.description=e),type:"text",placeholder:"Description",name:"description",class:D(["relative w-full rounded border bg-white bg-white px-3 py-3 pr-10 text-sm shadow outline-none focus:outline-none",s.errors&&s.errors.description?"border-red-500 text-red-600 placeholder-red-500 dark:text-red-600 dark:placeholder-red-600":"border-transparent text-slate-600 placeholder-slate-300 dark:placeholder-slate-400"])},null,2),[[C,s.form.description]]),p("span",Ie,[p("span",{class:D(["fas fa-pencil",s.errors&&s.errors.description?"text-red-600":"text-slate-300"])},null,2)])])]),p("div",Se,[p("div",$e,[Ne,R(p("input",{id:"level","onUpdate:modelValue":t[4]||(t[4]=e=>s.form.level=e),type:"number",placeholder:"Level",name:"level",class:D(["relative w-full rounded border bg-white bg-white px-3 py-3 pr-10 text-sm shadow outline-none focus:outline-none",s.errors&&s.errors.level?"border-red-500 text-red-600 placeholder-red-500 dark:text-red-600 dark:placeholder-red-600":"border-transparent text-slate-600 placeholder-slate-300 dark:placeholder-slate-400"])},null,2),[[C,s.form.level]]),p("span",Ve,[p("span",{class:D(["fas fa-pencil",s.errors&&s.errors.level?"text-red-600":"text-slate-300"])},null,2)])])]),p("div",Ye,[p("div",Le,[Je,u(n,{modelValue:s.form.permissions,"onUpdate:modelValue":t[5]||(t[5]=e=>s.form.permissions=e),options:a.availablePermissions,"track-by":"id",label:"name",mode:"tags",placeholder:"Select role permissions"},null,8,["modelValue","options"])])]),a.role&&a.role.users&&a.role.users.length&&a.role.users.length>0?(d(),c("div",ze,[p("div",Ge,[Ke,v(": This will affect "),p("span",Oe,g(a.role.users.length),1),v(" User"+g(a.role.users.length>1?"s":""),1)])])):m("",!0),p("div",qe,[p("div",He,[s.form.created_at?(d(),c("div",Qe,[v(" Created at: "),p("div",We,g(o.parseDisplayDate(s.form.created_at)),1)])):m("",!0)]),p("div",Xe,[s.form.updated_at?(d(),c("div",Ze,[v(" Updated at: "),p("div",et,g(o.parseDisplayDate(s.form.updated_at)),1)])):m("",!0)])])],32)])),footer:h((()=>[p("div",tt,[s.changed?(d(),b(f,{key:0,disabled:a.loading||s.submitting||!s.changed,class:"float-left border border-green-800 bg-transparent bg-transparent text-sm font-medium text-green-800 text-white shadow-md transition duration-150 ease-in-out hover:border-green-900 hover:bg-green-900 hover:text-white hover:shadow-lg focus:shadow-lg active:shadow-lg dark:hover:border-green-800 dark:hover:bg-green-800",onClick:o.submit},{text:h((()=>[v(g(a.newRole?s.submitting?"Creating":"Create":s.submitting?"Updating":"Update")+" ",1),s.submitting?(d(),c("span",at)):m("",!0)])),_:1},8,["disabled","onClick"])):m("",!0),u(f,{disabled:a.loading||s.submitting,class:"float-right border border-gray-700 bg-transparent bg-transparent text-sm font-medium text-gray-700 text-white shadow-md transition duration-150 ease-in-out hover:border-gray-700 hover:bg-gray-700 hover:text-white hover:shadow-lg focus:shadow-lg active:shadow-lg dark:hover:bg-gray-700",onClick:o.closeModal},{text:h((()=>[v(g(s.changed?"Cancel":"Close"),1)])),_:1},8,["disabled","onClick"])])])),_:1},8,["show-modal","onCloseModal"])}],["__scopeId","data-v-3283c55c"]]),CircleSvg:A,PerPage:B},props:{},setup:()=>({}),data:()=>({dataReady:!1,rolesData:null,pagination:{},perPage:25,lockJigled:!1,showCreateRoleForm:!1,roleEditing:null,creatingNewRole:!1,roleFormKey:432489,availablePermissions:[],permissionsDataReady:!1}),computed:{...f({authenticated:"auth/authenticated",user:"auth/user",roles:"auth/roles"})},watch:{},created(){},mounted(){this.getRoles(),this.getPermissions()},beforeUnmount(){},updated(){},methods:{...l({popToast:"toast/popToast"}),perPageChanged(e){this.perPage=parseInt(e),this.pagination.current_page=1,this.getRoles()},async getRoles(e=null){e&&(this.pagination.current_page=e),await k.get(`/api/roles-complete?page=${this.pagination.current_page}&per=${this.perPage}`).then((({data:e})=>{this.rolesData=e.data,delete e.data,this.pagination=e,this.dataReady=!0})).catch((({response:e})=>{this.popToast({message:"Error Getting Roles",timer:5e3,icon:"error"}),this.dataReady=!0})),this.dataReady=!0},async getPermissions(){this.permissionsDataReady=!1,await k.get("/api/permissions").then((({data:e})=>{this.availablePermissions=e.permissions,this.permissionsDataReady=!0})).catch((({response:e})=>{this.popToast({message:"Error Getting Permissions",timer:5e3,icon:"error"}),this.permissionsDataReady=!0})),this.permissionsDataReady=!0},async deleteRole(e){await k.delete(`/api/roles/delete/role/${e.id}`).then((({data:e})=>{this.rolesData=this.rolesData.filter((t=>t.id!=e.id)),this.popToast({message:"Successfully Deleted Role!",timer:5e3,icon:"success"})})).catch((({response:e})=>{this.popToast({message:"Error Deleting Role",timer:5e3,icon:"error"}),this.dataReady=!0}))},jiggleTheLock(){const e=this;e.lockJigled=!0,setTimeout((()=>{e.lockJigled=!1}),1)},closeRoleForm(){this.roleEditing=null,this.creatingNewRole=!1,this.showCreateRoleForm=!1},editRole(e){this.roleFormKey+=1,this.roleEditing=e,this.creatingNewRole=!1,this.showCreateRoleForm=!0},roleUpdated(e){this.rolesData=this.rolesData.map((t=>t.id!==e.id?t:e)),this.getRoles(),this.jiggleTheLock(),this.closeRoleForm()},roleCreated(e){this.rolesData.push(e),this.getRoles(),this.closeRoleForm()},triggerCreateRole(){this.roleFormKey+=1,this.creatingNewRole=!0,this.showCreateRoleForm=!0,this.roleEditing=null}}},st={id:"roles",class:"bg-white p-3 dark:bg-slate-800 dark:text-gray-200"},ot={class:"mb-6 text-sm font-semibold","aria-label":"Breadcrumb"},lt={class:"inline-flex list-none p-0"},nt={class:"flex items-center"},it={class:"flex items-center"},dt={class:"flex items-center"},ct={key:0,class:"fas fa-plus fa-fw ml-2 mr-2"},pt=p("span",{class:"sr-only"},"Create New Role",-1);e("default",I(rt,[["render",function(e,t,a,r,s,o){const l=i("router-link"),n=i("ChevronRightIcon"),g=i("PerPage"),f=i("CircleSvg"),x=i("AppButton"),y=i("RolesTable"),w=i("RoleFormModal"),k=P("tippy");return d(),c("div",st,[p("nav",ot,[p("ol",lt,[p("li",nt,[e.authenticated&&e.roles&&(e.roles.admin||e.roles.superAdmin)?(d(),b(l,{key:0,to:{name:"admin"},class:"text-gray-500 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-400"},{default:h((({isActive:e})=>[v(" Admin ")])),_:1})):m("",!0)]),p("li",it,[u(n,{class:"ml-2 mr-2 mt-0 h-4 w-4"})]),p("li",dt,[e.authenticated&&e.roles&&(e.roles.admin||e.roles.superAdmin)?(d(),b(l,{key:0,to:{name:"roles"},class:"text-gray-500 hover:text-gray-900 dark:text-gray-300 dark:hover:text-gray-400"},{default:h((({isActive:e})=>[p("span",{class:D([e&&"cursor-default text-gray-800 hover:text-gray-900 dark:text-gray-500 dark:hover:text-gray-500"])}," Roles ",2)])),_:1})):m("",!0)])]),s.dataReady?(d(),b(g,{key:0,items:s.rolesData,"per-page":s.perPage,class:"float-right mb-2",style:{"margin-top":"-0.5em"},onChanged:o.perPageChanged},null,8,["items","per-page","onChanged"])):m("",!0)]),R((d(),b(x,{disabled:s.showCreateRoleForm||!s.dataReady,class:"float-right mb-2 px-2 py-2 text-sm font-medium",onClick:o.triggerCreateRole},{text:h((()=>[s.dataReady?(d(),c("span",ct)):m("",!0),s.dataReady?m("",!0):(d(),b(f,{key:1,class:"ml-2 mr-2 mt-0 h-4 w-4"})),pt])),_:1},8,["disabled","onClick"])),[[k,"Create Role"]]),u(y,{"roles-data":s.rolesData,pagination:s.pagination,"per-page":s.perPage,"data-ready":s.dataReady,"lock-jiggled":s.lockJigled,onGetRoles:o.getRoles,onEditRole:o.editRole,onDeleteRole:o.deleteRole},null,8,["roles-data","pagination","per-page","data-ready","lock-jiggled","onGetRoles","onEditRole","onDeleteRole"]),(d(),b(w,{key:s.roleFormKey,"showing-form":s.showCreateRoleForm,role:s.roleEditing,"new-role":s.creatingNewRole,"available-permissions":s.availablePermissions,onCloseModal:o.closeRoleForm,onRoleCreated:o.roleCreated,onRoleUpdated:o.roleUpdated},null,8,["showing-form","role","new-role","available-permissions","onCloseModal","onRoleCreated","onRoleUpdated"]))])}]]))}}}));
